webpackJsonp([7],{"Py+v":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("tQBc"),i=a("BN1A"),l={components:{titleTool:n.a},filters:{formatString:function(e){return e.length>10?e.substring(0,8)+"...":e}},data:function(){return{currentPage:1,pageSize:10,totalNum:8,tableHeight:"250",currentApplicationId:"",applicationName:"全部应用",currentServiceClassId:"",keyword:"",applicationList:[],serviceClassData:[],tableData:[]}},methods:{querySearch:function(e){console.log("触发查询："+e),this.currentPage=1,this.loadingTableData()},changeApplication:function(e){console.log("更改应用："+e.appName),this.currentApplicationId=e.appId,this.applicationName=e.appName,this.currentPage=1,this.loadingTableData()},changeServiceClass:function(e){this.currentPage=1,this.loadingTableData()},showAllService:function(){this.currentApplicationId="",this.applicationName="全部应用",this.currentServiceClassId="",this.keyword="",this.currentPage=1,this.loadingTableData()},jumpApplicationPage:function(e){"add"==e?this.$router.push({name:"consoleMyApplicantionAdd"}):this.$router.push({path:"/myApplicantion"})},handleCurrentChange:function(e){this.currentPage=e,this.loadingTableData()},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.loadingTableData()},loadingTableData:function(){var e=this;console.log("加载表格数据");var t={pageSize:this.pageSize,pageNum:this.currentPage,aId:this.currentApplicationId,rootClassId:this.currentServiceClassId,keyword:this.keyword};Object(i.d)(t).then(function(t){e.tableData=t.data,e.totalNum=t.total})},seeDetails:function(e){this.$router.push({name:"consoleServiceDetail",query:{cId:e.classId,sId:e.serviceId}})},seeDocument:function(e){this.$router.push({name:"consoleTechDocument",query:{cId:e.classId,id:e.serviceId}})}},mounted:function(){var e=this;setTimeout(function(){e.tableHeight=document.getElementById("app-main").offsetHeight-300},500),Object(i.b)({number:4}).then(function(t){e.applicationList=t.data}),Object(i.c)().then(function(t){e.serviceClassData=t.data}),this.loadingTableData()}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("title-tool",{on:{querySearch:e.querySearch}}),e._v(" "),a("el-row",[e._l(e.applicationList,function(t){return a("el-button",{key:t.id,staticClass:"selfbutton2",class:e.currentApplicationId==t.appId?"active":"",on:{click:function(a){e.changeApplication(t)}}},[a("span",{attrs:{title:t.appName}},[e._v(e._s(e._f("formatString")(t.appName)))]),e._v(" "),a("br"),e._v(" "),a("span",[e._v("接入服务("+e._s(t.serviceCount)+") ")])])}),e._v(" "),a("el-button",{staticClass:"selfbutton2"},[a("span",{staticClass:"font18"},[a("i",{staticClass:"el-icon-circle-plus-outline"})]),e._v(" "),a("span",{staticClass:"underline",on:{click:function(t){e.jumpApplicationPage("add")}}},[e._v("创建应用 ")]),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"underline",on:{click:e.jumpApplicationPage}},[e._v("查看更多应用 ")])])],2),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("el-row",[a("a",{staticClass:"underline",on:{click:e.showAllService}},[e._v("我的服务")]),e._v("\n    >\n    "),a("span",[e._v(e._s(e.applicationName))]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeServiceClass},model:{value:e.currentServiceClassId,callback:function(t){e.currentServiceClassId=t},expression:"currentServiceClassId"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.serviceClassData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2),e._v(" "),a("el-input",{staticClass:"inputwidth1",attrs:{"suffix-icon":"el-icon-search",placeholder:"输入想要检索的关键字"},on:{change:e.querySearch},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),a("br"),e._v(" "),a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","max-height":e.tableHeight}},[a("el-table-column",{attrs:{prop:"serviceName",label:"服务名称","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"className",label:"所属类型","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"allCount",label:"调用次数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"failCount",label:"调用失败"}}),e._v(" "),a("el-table-column",{attrs:{prop:"failRate",label:"失败率"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.failRate)+"%\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.seeDetails(t.row)}}},[e._v("查看详情")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.seeDocument(t.row)}}},[e._v("接口文档")])]}}])})],1)],1),e._v(" "),a("br"),e._v(" "),a("el-row",{staticClass:"text_center"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]},r=a("/Xao")(l,s,!1,null,null,null);t.default=r.exports}});